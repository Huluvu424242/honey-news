import{c as t,O as s,e as i,E as e,a as r,b as o}from"./p-a9e36fb1.js";const n=t((t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class h extends s{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const s=new u(this,this);return s.operator=t,s}_throwIfClosed(){if(this.closed)throw new n}next(t){i((()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const i of s)i.next(t)}}))}error(t){i((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:s}=this;for(;s.length;)s.shift().error(t)}}))}complete(){i((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:s,isStopped:i,observers:n}=this;return s||i?e:(n.push(t),new r((()=>o(n,t))))}_checkFinalizedStatuses(t){const{hasError:s,thrownError:i,isStopped:e}=this;s?t.error(i):e&&t.complete()}asObservable(){const t=new s;return t.source=this,t}}h.create=(t,s)=>new u(t,s);class u extends h{constructor(t,s){super(),this.destination=t,this.source=s}next(t){var s,i;null===(i=null===(s=this.destination)||void 0===s?void 0:s.next)||void 0===i||i.call(s,t)}error(t){var s,i;null===(i=null===(s=this.destination)||void 0===s?void 0:s.error)||void 0===i||i.call(s,t)}complete(){var t,s;null===(s=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===s||s.call(t)}_subscribe(t){var s,i;return null!==(i=null===(s=this.source)||void 0===s?void 0:s.subscribe(t))&&void 0!==i?i:e}}const c={now:()=>(c.delegate||Date).now(),delegate:void 0};class d extends h{constructor(t=1/0,s=1/0,i=c){super(),this._bufferSize=t,this._windowTime=s,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=s===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,s)}next(t){const{isStopped:s,_buffer:i,_infiniteTimeWindow:e,_timestampProvider:r,_windowTime:o}=this;s||(i.push(t),!e&&i.push(r.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const s=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:e}=this,r=e.slice();for(let s=0;s<r.length&&!t.closed;s+=i?1:2)t.next(r[s]);return this._checkFinalizedStatuses(t),s}_trimBuffer(){const{_bufferSize:t,_timestampProvider:s,_buffer:i,_infiniteTimeWindow:e}=this,r=(e?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!e){const t=s.now();let e=0;for(let s=1;s<i.length&&i[s]<=t;s+=2)e=s;e&&i.splice(0,e+1)}}}const l=new class{constructor(){this.route=new d,this.routenprefix="",this.routes=new Map,window.onpopstate=()=>{const t=window.location.pathname;this.route.next(t.replace(this.routenprefix,"")),this.slot&&(this.slot.innerHTML=this.routes.get(t))}}setRoutenPrefix(t){t&&"/"!==t&&(this.routenprefix=t)}setSlotElement(t){this.slot=t}addRouteToSlot(t,s){this.routes.set(t,s)}navigateToRoute(t){window.history.pushState({},t,window.location.origin+this.routenprefix+t),this.route.next(t),this.slot&&(this.slot.innerHTML=this.routes.get(t))}getRouteListener(){return this.route}},a=t=>{l.navigateToRoute(t)};export{d as R,c as d,a as n,l as r}