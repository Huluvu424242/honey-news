function t(t){return"function"==typeof t}function n(t){const n=t((t=>{Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const r=n((t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map(((t,n)=>`${n+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n}));function i(t,n){if(t){const r=t.indexOf(n);0<=r&&t.splice(r,1)}}class s{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(const t of i)t.remove(this);else i.remove(this);const{initialTeardown:s}=this;if(t(s))try{s()}catch(t){n=t instanceof r?t.errors:[t]}const{_teardowns:e}=this;if(e){this._teardowns=null;for(const t of e)try{c(t)}catch(t){n=null!=n?n:[],t instanceof r?n=[...n,...t.errors]:n.push(t)}}if(n)throw new r(n)}}add(t){var n;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof s){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&i(n,t)}remove(t){const{_teardowns:n}=this;n&&i(n,t),t instanceof s&&t._removeParent(this)}}s.EMPTY=(()=>{const t=new s;return t.closed=!0,t})();const e=s.EMPTY;function o(n){return n instanceof s||n&&"closed"in n&&t(n.remove)&&t(n.add)&&t(n.unsubscribe)}function c(n){t(n)?n():n.unsubscribe()}const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h={setTimeout(...t){const{delegate:n}=h;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=h;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function l(t){h.setTimeout((()=>{const{onUnhandledError:n}=u;if(!n)throw t;n(t)}))}function a(){}const f=d("C",void 0,void 0);function d(t,n,r){return{kind:t,value:n,error:r}}function p(t){t()}class v extends s{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o(t)&&t.add(this)):this.destination=_}static create(t,n,r){return new b(t,n,r)}next(t){this.isStopped?w(function(t){return d("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?w(d("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?w(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class b extends v{constructor(n,r,i){let s;if(super(),t(n))s=n;else if(n){let t;({next:s,error:r,complete:i}=n),this&&u.useDeprecatedNextContext?(t=Object.create(n),t.unsubscribe=()=>this.unsubscribe()):t=n,s=null==s?void 0:s.bind(t),r=null==r?void 0:r.bind(t),i=null==i?void 0:i.bind(t)}this.destination={next:s?y(s):a,error:y(null!=r?r:m),complete:i?y(i):a}}}function y(t){return(...n)=>{try{t(...n)}catch(t){l(t)}}}function m(t){throw t}function w(t,n){const{onStoppedNotification:r}=u;r&&h.setTimeout((()=>r(t,n)))}const _={closed:!0,next:a,error:m,complete:a},x="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(t){return t}class g{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new g;return n.source=this,n.operator=t,n}subscribe(n,r,i){const s=(e=n)&&e instanceof v||function(n){return n&&t(n.next)&&t(n.error)&&t(n.complete)}(e)&&o(e)?n:new b(n,r,i);var e;return p((()=>{const{operator:t,source:n}=this;s.add(t?t.call(s,n):n?this._subscribe(s):this._trySubscribe(s))})),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=S(n))(((n,r)=>{let i;i=this.subscribe((n=>{try{t(n)}catch(t){r(t),null==i||i.unsubscribe()}}),r,n)}))}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[x](){return this}pipe(...t){return(0===(n=t).length?E:1===n.length?n[0]:function(t){return n.reduce(((t,n)=>n(t)),t)})(this);var n}toPromise(t){return new(t=S(t))(((t,n)=>{let r;this.subscribe((t=>r=t),(t=>n(t)),(()=>t(r)))}))}}function S(t){var n;return null!==(n=null!=t?t:u.Promise)&&void 0!==n?n:Promise}g.create=t=>new g(t);export{e as E,g as O,v as S,s as a,i as b,n as c,p as e,t as i,x as o,l as r}